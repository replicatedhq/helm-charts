apps:
  nginx:
    enabled: true
    type: deployment
    replicas: 1
    containers:
      nginx:
        image:
          repository: nginx
          tag: 1.25.0-alpine
        ports:
          - name: http
            containerPort: 80

services:
  nginx:
    enabled: true
    appName: ["nginx"]
    type: ClusterIP
    ports:
      http:
        enabled: true
        port: 8080
        protocol: HTTP
        targetPort: 80

troubleshoot:
  support-bundles:
    replicated:
      enabled: true
  preflights:
    wg-preflights:  # arbitrary name for your custom spec
      enabled: true
      collectors:
        - clusterInfo: {}
        - clusterResources:
            ignoreRBAC: true
      analyzers:
        - clusterVersion:
            outcomes:
              - fail:
                  when: "< 1.16.0"
                  message: The application requires at least Kubernetes 1.16.0, and recommends 1.18.0.
                  uri: https://kubernetes.io
              - warn:
                  when: "< 1.18.0"
                  message: Your cluster meets the minimum version of Kubernetes, but we recommend you update to 1.18.0 or later.
                  uri: https://kubernetes.io
              - pass:
                  message: Your cluster meets the recommended and required versions of Kubernetes.
